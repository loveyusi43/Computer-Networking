# Computer Networking

​                                                       A Top-Down Approach

## 计算机网络和因特网

### 什么是因特网

#### 具体构成描述

- 因特网是一个世界范围内的计算机网络，即它是一个互联了遍及全世界数十亿的计算设备的网络。
- 所有与因特网相连的设备都称为**主机**(host)或**端系统**(end system)。
- 端系统通过**通信链路**(communication link)和**分组交换机**(packet switch)连接到一起。
- 不同的链路能够以不同的速率传输数据，链路的**传输速率**(transmission rate)以比特/秒(bit/s, 或bps)度量。当一台端系统要向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节。由此形成的信息包用计算机网络的术语来说称为**分组**(packet)。这些分组通过网络发送到目的端系统，在那里被装配成初始数据。
- 在当今的因特网中，两种最著名的分组交换机类型是**路由器**(router)和**链路层交换机**(link-layer switch)。这两种类型的交换机朝着最终目的地转发分组。链路层交换机通常用于接入网中，而路由器通常用于网络核心中。从发送端系统到接收端系统，一个分组所经历的一系列通信链路和分组交换机称为通过该网络的**路径**(route或path)。
- 端系统通过**因特网服务提供商**(Internet Service Provider, ISP)接入因特网，每个ISP自身就是一个由多台分组交换机和多段通信链路组成的网络。
- 端系统、分组交换机和其它因特网部件都要运行一系列**协议**(protocol)，这些协议控制因特网中信息的发送和接收。**TCP**(Transmission Control Protocol, 传输控制协议)和**IP**(Internet Protocol, 网际协议)是因特网中两个最重要的协议。IP协议定义在路由器和端系统之间发送和接收的分组格式。因特网的主要协议统称为**TCP/IP**。

#### 服务描述

从为应用程序提供服务的基础设施的角度来描述因特网。

- 与因特网相连的端系统提供了一个**套接字接口**(socket interface)，该接口运行在一个端系统上的应用程序请求因特网基础设施向运行在另一端系统上的特定目的地程序交付数据的方式。

#### 什么是协议

1. 人类活动的类比

   ![<img src="Computer Networking.assets/image-20221203151621619.png" alt="image-20221203151621619" style="zoom:67%;" />]

2. 网络协议

**协议**(protocol)定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送、接收一条报文或其它事件采取的行动。

---

#### 复习题

1. “主机”和“端系统”之间有什么不同吗？列举几种不同的端系统。Web服务器是一种端系统吗？

- “主机”==“端系统”
- 传统：桌面PC、Linux工作站以及所谓的服务器;非传统：家用电器、汽车、游戏机等等能上网的设备
- 是的

2. “协议”常被用于外交关系。维基百科是怎么描述外交协议的？

[外交协议](https://zh.m.wikipedia.org/zh-hans/%E5%A4%96%E4%BA%A4)

3. 标准对于协议为什么这么重要？

标准定义了做什么，协议负责怎么做

### 网络边缘

端系统也称为主机(host)，主机=端系统。主机有时又被进一步划分为两类：**客户**(client)和**服务器**(server)。

#### 接入网

**接入网**是指将端系统物理连接到其**边缘路由器**(edge router)的网络。边缘路由器是端系统到任何其它远端系统的路径上的第一台路由器。

1. 家庭接入：DSL、电缆、FTTH、拨号和卫星

- 宽带住宅接入有两种最流行的方式：**数字用户线**(Digital Subscriber Line, DSL)和电缆。
- 当使用DSL时。用户的本地电话公司也是他的ISP。每个用户的DSL调制解调器使用现有的电话线(即双绞铜线)与电话公司的本地中心局(CO)中的数字用户线接入复用器(DSLAM)交换数据。

<img src="Computer Networking.assets/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWFUgSG9uZ2R1bw==,size_20,color_FFFFFF,t_70,g_se,x_16.png" alt="img" style="zoom: 67%;" />

- DSL利用电话公司现有的本地电话基础设施，而**电缆因特网接入**(cable Internet access)利用了有线电视公司现有的有线电视基础设施。电缆因特网接入需要特殊的调制解调器，这种调制解调器称为电缆调制解调器(cable modem)
- **光纤到户**(Fiber To The Home)

2. 企业(和家庭)接入：以太网和WiFi
3. 广域无线接入：3G和LTE

#### 物理媒体

物理媒体的例子包括双绞铜线、同轴电缆、多模光纤维、陆地无线电频谱、和卫星无线电频谱。物理媒体分成两种类型：**引导型媒体**(guided media)和**非引导型媒体**(unguided media)

1. 双绞铜线
2. 同轴电缆
3. 光纤
4. 陆地无线电信道
5. 卫星无线电信道

### 网络核心

#### 分组交换

在各种网络应用中，端系统彼此交换**报文**(message)。报文能够包含协议涉及所需要的任何东西。报文可以执行一种控制功能，也可以包含数据。为了从源端系统向目的端系统发送一个报文，源将长报文划分成=为较小的数据块，称之为**分组**(packet)。在源和目的之间，每个分组都要通过链路和**分组交换机**(packet switch)传送。

1. 存储转发传输

多数分组交换机在链路的输入端使用**存储转发传输**(store-and-forward transmission)机制。存储转发传输是指在交换机能够开始向输出链路传输该分组的第一个比特之前，必须接受到接收到整个分组。

2. 排队时延和分组丢失

每台分组交换机有多个链路与之向连。对于每条相连的链路，该分组交换机具有一个**输出缓存**(output buffer，也称为**输出队列**(output queue))，它用于存储路由器准备发往那条链路的分组。

3. 转发表和路由选择协议

在因特网中，每端系统具有一个称为IP地址的地址。当源主机要向目的端系统发送一个分组时，源在该分组的首部包含了目的地的IP地址。

#### 电路交换

